> 常见问题

## 常见问题解答

### 电脑上ADB连接失败，显示"device not found"怎么办？

请按以下步骤排查：

1. 确保手机已开启USB调试模式
2. 检查USB数据线是否支持数据传输（不是仅充电线）
3. 在手机上允许USB调试授权
4. 尝试更换USB端口或重新插拔数据线

### 如何开启USB调试模式？

1. 进入手机"设置" → "我的设备" → "全部参数"
2. 连续点击"OS版本"7次，开启开发者选项
3. 返回设置，进入"更多设置" → "开发者选项"
4. 开启"USB调试"和"USB调试（安全设置）"

### 卸载系统应用安全吗？会不会导致系统问题？

本工具提供的卸载命令都是经过测试的安全操作：

- 只卸载非核心系统应用，不会影响系统稳定性
- 卸载的应用可以通过应用商店重新安装
- 如果误卸载，可以通过恢复出厂设置恢复
- 建议在操作前备份重要数据

### 系统优化后感觉没有明显变化？

优化效果可能需要一些时间才能体现：

- 重启手机让设置生效
- 清理后台应用和缓存
- 优化主要体现在电池续航和流畅度上
- 效果因设备型号和使用习惯而异

### 谷歌相机安装后无法打开或闪退？

请尝试以下解决方案：

1. 确保已按照指南正确配置相机权限
2. 检查是否下载了适配您设备的GCam版本
3. 清除谷歌相机的应用数据和缓存
4. 重启手机后再次尝试
5. 如果仍有问题，可以尝试其他版本的GCam

### 操作后出现问题，如何恢复？

如果遇到问题，可以尝试以下恢复方法：

1. 重启手机，很多问题重启后会自动解决
2. 通过应用商店重新安装被误卸载的应用
3. 在设置中恢复默认的系统设置
4. 如果问题严重，可以考虑恢复出厂设置

这个错误通常是由于权限不足导致的，请按以下步骤解决：

1. 进入手机"设置" → "更多设置" → "开发者选项"
2. 找到并开启**"USB调试（安全设置）"**选项
3. 重新连接USB数据线，在手机上重新授权USB调试
4. 重新执行命令

**注意：**"USB调试（安全设置）"是执行系统级命令的必要权限，没有此权限将无法执行优化命令。

### Termux配对时出现"error: protocol fault"错误？

出现"error: protocol fault (couldn't read status message)"错误的解决方法：

1. 确保Termux应用处于**小窗模式**或**分屏模式**
2. 不要完全退出或最小化Termux应用
3. 保持在无线调试界面，**不要离开该界面**
4. 如果离开了无线调试界面，六位数验证码和端口号会发生变化
5. 重新获取新的配对码和端口号，然后重新执行配对命令

**重要提示：**配对过程中请保持Termux在前台运行（小窗或分屏），同时不要离开手机的无线调试设置页面。

## ADB连接与管理

以下是在使用澎湃OS优化工具时经常用到的ADB命令，掌握这些命令可以帮助您更好地管理设备连接和调试。

### 无线连接命令

#### 配对设备（首次连接）

```
adb pair 127.0.0.1:<配对端口>
```

示例：adb pair 192.168.1.100:12345
首次连接时需要输入手机显示的6位配对码

#### 连接设备

```
adb connect 127.0.0.1:<连接端口>
```

示例：adb connect 192.168.1.100:54321
配对成功后，使用此命令连接设备（注意端口号与配对端口不同）

#### 断开连接

```
adb disconnect 127.0.0.1:<端口>
```

示例：adb disconnect 192.168.1.100:54321
断开指定设备的连接，或使用 "adb disconnect" 断开所有设备

### 设备管理命令

#### 查看已连接设备

```
adb devices
```

显示所有已连接的设备列表及其状态

#### 进入设备Shell

```
adb shell
```

进入设备的命令行环境，执行系统级命令

#### 重启ADB服务

```
adb kill-serveradb start-server
```

当连接出现问题时，重启ADB服务可以解决大部分连接问题

#### 查看设备信息

```
adb shell getprop ro.build.version.release
```

查看设备的Android版本信息

### 实用技巧

**快速连接技巧：**配对成功后，下次连接只需要使用 `adb connect` 命令，无需重复配对。

**保持连接稳定：**确保手机和电脑在同一WiFi网络下，避免网络切换导致连接断开。

**端口号说明：**配对端口和连接端口是不同的，配对时显示的两个端口号要分别用于配对和连接。

## ADB应用管理命令

使用ADB命令管理设备上的应用程序，包括查看、禁用、启用和卸载应用。

### 应用查看命令

#### 查看系统应用列表

```
pm list packages -s
```

显示设备上所有系统应用的包名列表，用于识别需要管理的应用

### 应用管理命令

#### 禁用应用

```
pm disable-user 应用包名
```

示例：pm disable-user com.miui.analytics
禁用指定应用，应用将不会运行但仍保留在系统中

#### 启用应用

```
pm enable 应用包名
```

示例：pm enable com.miui.analytics
重新启用之前被禁用的应用

#### 卸载应用（当前用户）

```
adb shell pm uninstall --user 0 应用包名
```

示例：adb shell pm uninstall --user 0 com.miui.analytics
为当前用户卸载指定应用，系统应用通常只能为用户卸载而不能完全删除

#### 恢复已卸载应用

```
adb shell cmd package install-existing 应用包名
```

示例：adb shell cmd package install-existing com.miui.analytics
恢复之前为当前用户卸载的系统应用，应用将重新出现在系统中

### 使用注意事项

**重要警告：**禁用或卸载系统应用可能影响设备正常功能，请确保了解应用作用后再操作。

**获取包名：**使用 `pm list packages -s` 命令可以查看所有系统应用的完整包名。

**恢复方法：**如果误操作导致问题，可以使用 `pm enable` 命令重新启用被禁用的应用。